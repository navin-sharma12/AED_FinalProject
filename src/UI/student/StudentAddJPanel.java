/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JPanel.java to edit this template
 */
package UI.student;

import Student.Student;
import UI.Admin_Login;
import UI.ControlAreaJPanel;
import UI.Ngo.NgoContolAreaJPanel;
import java.awt.CardLayout;
import java.sql.SQLException;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Locale;
import java.util.regex.Matcher;
import java.util.regex.Pattern;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

/**
 *
 * @author pikku
 */
public class StudentAddJPanel extends javax.swing.JPanel {

    /**
     * Creates new form StudentAddJPanel
     */
    Student s;
    JPanel controlArea;
    JPanel workArea;

    public StudentAddJPanel(JPanel controlArea, JPanel workArea) {
        initComponents();
        this.s = new Student();
        this.controlArea = controlArea;
        this.workArea = workArea;

    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jCheckBoxMenuItem1 = new javax.swing.JCheckBoxMenuItem();
        lblFirstname = new java.awt.Label();
        txtFirstname = new javax.swing.JTextField();
        lblLastname = new java.awt.Label();
        txtLastname = new javax.swing.JTextField();
        lblAge = new java.awt.Label();
        lblContact = new java.awt.Label();
        lblDob = new java.awt.Label();
        lblAddress = new java.awt.Label();
        lblGender = new java.awt.Label();
        lblZipcode = new java.awt.Label();
        txtGender = new javax.swing.JTextField();
        txtAge = new javax.swing.JTextField();
        txtContact = new javax.swing.JTextField();
        txtAddress = new javax.swing.JTextField();
        txtZipcode = new javax.swing.JTextField();
        btnAdd = new java.awt.Button();
        txtDate = new com.toedter.calendar.JDateChooser();
        btnBack = new javax.swing.JButton();
        jLabel1 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();

        jCheckBoxMenuItem1.setSelected(true);
        jCheckBoxMenuItem1.setText("jCheckBoxMenuItem1");

        setLayout(null);

        lblFirstname.setFont(new java.awt.Font(".AppleSystemUIFont", 1, 12)); // NOI18N
        lblFirstname.setText("Firstname");
        add(lblFirstname);
        lblFirstname.setBounds(191, 71, 97, 19);

        txtFirstname.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtFirstnameActionPerformed(evt);
            }
        });
        add(txtFirstname);
        txtFirstname.setBounds(386, 71, 153, 23);

        lblLastname.setFont(new java.awt.Font(".AppleSystemUIFont", 1, 12)); // NOI18N
        lblLastname.setText("Lastname");
        add(lblLastname);
        lblLastname.setBounds(191, 119, 97, 19);

        txtLastname.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtLastnameActionPerformed(evt);
            }
        });
        add(txtLastname);
        txtLastname.setBounds(386, 112, 153, 23);

        lblAge.setFont(new java.awt.Font(".AppleSystemUIFont", 1, 12)); // NOI18N
        lblAge.setText("Age");
        add(lblAge);
        lblAge.setBounds(191, 203, 97, 19);

        lblContact.setFont(new java.awt.Font(".AppleSystemUIFont", 1, 12)); // NOI18N
        lblContact.setText("Contact No");
        add(lblContact);
        lblContact.setBounds(191, 247, 97, 19);

        lblDob.setFont(new java.awt.Font(".AppleSystemUIFont", 1, 12)); // NOI18N
        lblDob.setText("Date of Birth");
        add(lblDob);
        lblDob.setBounds(191, 299, 97, 19);

        lblAddress.setFont(new java.awt.Font(".AppleSystemUIFont", 1, 12)); // NOI18N
        lblAddress.setText("Address");
        add(lblAddress);
        lblAddress.setBounds(191, 348, 97, 19);

        lblGender.setFont(new java.awt.Font(".AppleSystemUIFont", 1, 12)); // NOI18N
        lblGender.setText("Gender");
        add(lblGender);
        lblGender.setBounds(191, 161, 97, 19);

        lblZipcode.setFont(new java.awt.Font(".AppleSystemUIFont", 1, 12)); // NOI18N
        lblZipcode.setText("Zipcode");
        add(lblZipcode);
        lblZipcode.setBounds(191, 391, 97, 19);

        txtGender.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtGenderActionPerformed(evt);
            }
        });
        add(txtGender);
        txtGender.setBounds(386, 157, 153, 23);

        txtAge.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtAgeActionPerformed(evt);
            }
        });
        add(txtAge);
        txtAge.setBounds(386, 200, 153, 23);

        txtContact.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtContactActionPerformed(evt);
            }
        });
        add(txtContact);
        txtContact.setBounds(386, 247, 153, 23);

        txtAddress.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtAddressActionPerformed(evt);
            }
        });
        add(txtAddress);
        txtAddress.setBounds(386, 345, 153, 23);

        txtZipcode.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtZipcodeActionPerformed(evt);
            }
        });
        add(txtZipcode);
        txtZipcode.setBounds(386, 391, 153, 23);

        btnAdd.setFont(new java.awt.Font(".AppleSystemUIFont", 3, 12)); // NOI18N
        btnAdd.setLabel("Add");
        btnAdd.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnAddActionPerformed(evt);
            }
        });
        add(btnAdd);
        btnAdd.setBounds(390, 430, 75, 23);
        add(txtDate);
        txtDate.setBounds(386, 299, 153, 23);

        btnBack.setFont(new java.awt.Font(".AppleSystemUIFont", 1, 12)); // NOI18N
        btnBack.setText("Back");
        btnBack.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnBackActionPerformed(evt);
            }
        });
        add(btnBack);
        btnBack.setBounds(40, 20, 80, 30);

        jLabel1.setBackground(new java.awt.Color(35, 53, 100));
        jLabel1.setFont(new java.awt.Font(".AppleSystemUIFont", 1, 18)); // NOI18N
        jLabel1.setForeground(new java.awt.Color(0, 0, 51));
        jLabel1.setText("                                         Add : Student ");
        add(jLabel1);
        jLabel1.setBounds(122, 10, 640, 40);

        jLabel3.setText("‚èé");
        add(jLabel3);
        jLabel3.setBounds(20, 10, 20, 40);

        jLabel4.setIcon(new javax.swing.ImageIcon(getClass().getResource("/images/student 1 .png"))); // NOI18N
        jLabel4.setText("jLabel4");
        add(jLabel4);
        jLabel4.setBounds(0, -10, 770, 550);
    }// </editor-fold>//GEN-END:initComponents

    private void txtFirstnameActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtFirstnameActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtFirstnameActionPerformed

    private void txtLastnameActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtLastnameActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtLastnameActionPerformed

    private void txtGenderActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtGenderActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtGenderActionPerformed

    private void txtAgeActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtAgeActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtAgeActionPerformed

    private void txtContactActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtContactActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtContactActionPerformed

    private void txtAddressActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtAddressActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtAddressActionPerformed

    private void txtZipcodeActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtZipcodeActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtZipcodeActionPerformed

    private void btnAddActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnAddActionPerformed
        // TODO add your handling code here:
        if (txtFirstname.getText().isEmpty()) {
            JOptionPane.showMessageDialog(this, "First name cannot be null.");
        } else if (txtLastname.getText().isEmpty()) {
            JOptionPane.showMessageDialog(this, "Last name cannot be null.");
        } else if (txtGender.getText().isEmpty()) {
            JOptionPane.showMessageDialog(this, "Gender cannot be null");
        } else if (txtAge.getText().isEmpty()) {
            JOptionPane.showMessageDialog(this, "Age cannot be null.");
        } else if (Pattern.matches("[a-zA-Z]+", txtAge.getText())) {
            JOptionPane.showMessageDialog(this, "Age should be in digits.");
        } else if (Pattern.matches("[a-zA-Z]+", txtAge.getText())) {
            JOptionPane.showMessageDialog(this, "Age should be in digits.");
        } else if (!getContact(txtContact.getText())) {
            JOptionPane.showMessageDialog(this, "Invalid Contact No");
        } else if (txtDate.getDate() == null) {
            JOptionPane.showMessageDialog(this, "Dob cannot be null");
        } else if (txtAddress.getText().isEmpty()) {
            JOptionPane.showMessageDialog(this, "Address cannot be null");
        } else if (txtZipcode.getText().isEmpty()) {
            JOptionPane.showMessageDialog(this, "ZipCode cannot be null.");
        } else if (Pattern.matches("[a-zA-Z]+", txtZipcode.getText())) {
            JOptionPane.showMessageDialog(this, "ZipCode should be in digits.");
        } else {
            System.out.println(getContact(txtContact.getText()));
            String firstname = txtFirstname.getText();
            String lastname = txtLastname.getText();
            String gender = txtGender.getText();
            int age = Integer.parseInt(txtAge.getText());
            long contact_no = Long.parseLong(txtContact.getText());
            Date dob = txtDate.getDate();
            String address = txtAddress.getText();
            int zipcode = Integer.parseInt(txtZipcode.getText());
            Student s_new = new Student(firstname, lastname, gender, age, contact_no, dob, address, zipcode);
            try {
                s_new.addStudent(s_new);
                txtFirstname.setText("");
                txtLastname.setText("");
                txtGender.setText("");
                txtAge.setText("");
                txtContact.setText("");
                txtDate.setDate(null);
                txtAddress.setText("");
                txtZipcode.setText("");
                JOptionPane.showMessageDialog(this, "Student Added");
            } catch (SQLException e) {
                JOptionPane.showMessageDialog(this, e.getMessage());
            }
        }


    }//GEN-LAST:event_btnAddActionPerformed

    private void btnBackActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnBackActionPerformed
        // TODO add your handling code here:

       
        ControlAreaJPanel cajp = new ControlAreaJPanel(controlArea, workArea);
        controlArea.add("ControlAreaJPanel", cajp);
        CardLayout layout = (CardLayout) controlArea.getLayout();
        layout.next(controlArea);
        workArea.remove(this);
        
    }//GEN-LAST:event_btnBackActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private java.awt.Button btnAdd;
    private javax.swing.JButton btnBack;
    private javax.swing.JCheckBoxMenuItem jCheckBoxMenuItem1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private java.awt.Label lblAddress;
    private java.awt.Label lblAge;
    private java.awt.Label lblContact;
    private java.awt.Label lblDob;
    private java.awt.Label lblFirstname;
    private java.awt.Label lblGender;
    private java.awt.Label lblLastname;
    private java.awt.Label lblZipcode;
    private javax.swing.JTextField txtAddress;
    private javax.swing.JTextField txtAge;
    private javax.swing.JTextField txtContact;
    private com.toedter.calendar.JDateChooser txtDate;
    private javax.swing.JTextField txtFirstname;
    private javax.swing.JTextField txtGender;
    private javax.swing.JTextField txtLastname;
    private javax.swing.JTextField txtZipcode;
    // End of variables declaration//GEN-END:variables

    public boolean getContact(String no) {
        String regex = "^(\\+\\d{1,2}\\s)?\\(?\\d{3}\\)?[\\s.-]?\\d{3}[\\s.-]?\\d{4}$";
        Pattern pattern = Pattern.compile(regex);
        Matcher matcher = pattern.matcher(no);
        return matcher.matches();
    }
}
